C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       03/29/2016 00:06:39 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE DESCRIPTORS
OBJECT MODULE PLACED IN .\src/descriptors.OBJ
COMPILER INVOKED BY: Z:\home\pp\SimplicityStudio_v3\developer\toolchains\keil_8051\9.53\BIN\C51.exe /home/pp/apps/u2f-ze
                    -ro/firmware/src/descriptors.c OMF2 LARGE DEBUG OBJECTEXTEND ROM(LARGE) WARNINGLEVEL(2) FLOATFUZZY(3) OPTIMIZE(9,SIZE) IN
                    -TVECTOR(0X0000) INTPROMOTE INCDIR(/home/pp/apps/u2f-zero/firmware/inc/config;/home/pp/apps/u2f-zero/firmware/inc;/home/p
                    -p/apps/u2f-zero/firmware/tests;/home/pp/SimplicityStudio_v3/developer/sdks/si8051/v3//Device/shared/si8051Base;/home/pp/
                    -SimplicityStudio_v3/developer/sdks/si8051/v3//Device/EFM8UB1;/home/pp/SimplicityStudio_v3/developer/sdks/si8051/v3//Devi
                    -ce/EFM8UB1/inc;/home/pp/SimplicityStudio_v3/developer/sdks/si8051/v3//Lib/efm8_usb/inc;/home/pp/SimplicityStudio_v3/deve
                    -loper/sdks/si8051/v3//Device/EFM8UB1/peripheral_driver/inc;/home/pp/SimplicityStudio_v3/developer/sdks/si8051/v3//Lib/ef
                    -m8_assert) REGFILE(u2f-firmware.ORC) PRINT(.\src/descriptors.lst) COND PAGEWIDTH(120) PAGELENGTH(65) OBJECT(.\src/descri
                    -ptors.OBJ)

line level    source

   1          /*******************************************************************************
   2           * @file descriptors.c
   3           * @brief USB descriptors.
   4           *******************************************************************************/
   5          
   6          //=============================================================================
   7          // src/descriptors.c: generated by Hardware Configurator
   8          //
   9          // This file is only generated if it does not exist. Modifications in this file
  10          // will persist even if Configurator generates code. To refresh this file,
  11          // you must first delete it and then regenerate code.
  12          //=============================================================================
  13          //-----------------------------------------------------------------------------
  14          // Includes
  15          //-----------------------------------------------------------------------------
  16          #include <si_toolchain.h>
  17          #include <endian.h>
  18          #include <stdlib.h>
  19          #include <string.h>
  20          #include <efm8_usb.h>
  21          #include "descriptors.h"
  22          
  23          #ifdef __cplusplus
              extern "C" {
              #endif
  26          
  27          // HID Report Descriptor for Interface 0
  28          SI_SEGMENT_VARIABLE(ReportDescriptor0[34],
  30                          const uint8_t,
  30                          SI_SEG_CODE) =
  31          {
  32          
  33                  0x06, 0xd0, 0xf1,// USAGE_PAGE (FIDO Alliance)
  34                  0x09, 0x01,// USAGE (Keyboard)
  35                  0xa1, 0x01,// COLLECTION (Application)
  36          
  37                  0x09, 0x20,                   //   USAGE (Input Report Data)
  38                  0x15, 0x00,                   //   LOGICAL_MINIMUM (0)
  39                  0x26, 0xff, 0x00,             //   LOGICAL_MAXIMUM (255)
  40                  0x75, 0x08,                   //   REPORT_SIZE (8)
  41                  0x95, HID_PACKET_SIZE,                   //   REPORT_COUNT (64)
  42                  0x81, 0x02,                   //   INPUT (Data,Var,Abs)
  43                  0x09, 0x21,                   //   USAGE(Output Report Data)
  44                  0x15, 0x00,                   //   LOGICAL_MINIMUM (0)
  45                  0x26, 0xff, 0x00,             //   LOGICAL_MAXIMUM (255)
  46                  0x75, 0x08,                   //   REPORT_SIZE (8)
  47                  0x95, HID_PACKET_SIZE,                   //   REPORT_COUNT (64)
  48                  0x91, 0x02,                   //   OUTPUT (Data,Var,Abs)
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       03/29/2016 00:06:39 PAGE 2   

  49          
  50          
  51                  0xc0,// END_COLLECTION
  52          
  53          };
  54          SI_SEGMENT_VARIABLE(deviceDesc[],
  56                          const USB_DeviceDescriptor_TypeDef,
  56                          SI_SEG_CODE) =
  57          {
  58                  USB_DEVICE_DESCSIZE,             // bLength
  59                  USB_DEVICE_DESCRIPTOR,// bLength
  60                  htole16(0x0200),// bcdUSB
  61                  0,// bDeviceClass
  62                  0,// bDeviceSubClass
  63                  0,// bDeviceProtocol
  64                  64,// bMaxPacketSize
  65                  USB_VENDOR_ID,// idVendor
  66                  USB_PRODUCT_ID,// idProduct
  67                  htole16(0x0100),// bcdDevice
  68                  1,// iManufacturer
  69                  2,// iProduct
  70                  3,// iSerialNumber
  71                  1,// bNumConfigurations
  72          };
  73          
  74          SI_SEGMENT_VARIABLE(configDesc[],
  76                          const uint8_t,
  76                          SI_SEG_CODE) =
  77          {
  78                  USB_CONFIG_DESCSIZE,             // bLength
  79                  USB_CONFIG_DESCRIPTOR,// bLength
  80                  0x29,// wTotalLength(LSB)
  81                  0x00,// wTotalLength(MSB)
  82                  1,// bNumInterfaces
  83                  1,// bConfigurationValue
  84                  0,// iConfiguration
  85          
  86                  CONFIG_DESC_BM_RESERVED_D7,// bmAttrib: Bus powered
  87          
  88                  CONFIG_DESC_MAXPOWER_mA(100),// bMaxPower: 100 mA
  89          
  90                  //Interface 0 Descriptor
  91                  USB_INTERFACE_DESCSIZE,// bLength
  92                  USB_INTERFACE_DESCRIPTOR,// bDescriptorType
  93                  0,// bInterfaceNumber
  94                  0,// bAlternateSetting
  95                  2,// bNumEndpoints
  96                  3,// bInterfaceClass: HID (Human Interface Device)
  97                  0,// bInterfaceSubClass
  98                  0,// bInterfaceProtocol
  99                  4,// iInterface
 100          
 101                  //HID Descriptor
 102                  USB_HID_DESCSIZE,// bLength
 103                  USB_HID_DESCRIPTOR,// bLength
 104                  0x11,// bcdHID (LSB)
 105                  0x01,// bcdHID (MSB)
 106                  0,// bCountryCode
 107                  1,// bNumDescriptors
 108                  USB_HID_REPORT_DESCRIPTOR,// bDescriptorType
 109                  sizeof( ReportDescriptor0 ),// wDescriptorLength(LSB)
 110                  sizeof( ReportDescriptor0 )>>8,// wDescriptorLength(MSB)
 111          
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       03/29/2016 00:06:39 PAGE 3   

 112                  //Endpoint 1 IN Descriptor
 113                  USB_ENDPOINT_DESCSIZE,// bLength
 114                  USB_ENDPOINT_DESCRIPTOR,// bDescriptorType
 115                  0x81,// bEndpointAddress
 116                  USB_EPTYPE_INTR,// bAttrib
 117                  HID_PACKET_SIZE,// wMaxPacketSize (LSB)
 118                  0x00,// wMaxPacketSize (MSB)
 119                  5,// bInterval
 120          
 121                  //Endpoint 1 OUT Descriptor
 122                  USB_ENDPOINT_DESCSIZE,// bLength
 123                  USB_ENDPOINT_DESCRIPTOR,// bDescriptorType
 124                  0x01,// bEndpointAddress
 125                  USB_EPTYPE_INTR,// bAttrib
 126                  HID_PACKET_SIZE,// wMaxPacketSize (LSB)
 127                  0x00,// wMaxPacketSize (MSB)
 128                  5,// bInterval
 129          };
 130          
 131          #define LANG_STRING   htole16( SLAB_USB_LANGUAGE )
 132          #define MFR_STRING                             "Silicon Labs"
 133          #define PROD_STRING                            "U2F Zero"
 134          #define SER_STRING                             "0123456789ABCDEF"
 135          #define INT0_STRING                            "HID Keyboard"
 136          
 137          LANGID_STATIC_CONST_STRING_DESC( langDesc[], LANG_STRING );
 138          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( mfrDesc[], MFR_STRING );
 139          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( prodDesc[], PROD_STRING );
 140          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( serDesc[], SER_STRING );
 141          UTF16LE_PACKED_STATIC_CONST_STRING_DESC( int0Desc[], INT0_STRING );
 142          
 143          //-----------------------------------------------------------------------------
 144          SI_SEGMENT_POINTER(myUsbStringTable_USEnglish[],
 146                          static const USB_StringDescriptor_TypeDef,
 146                          const SI_SEG_CODE) =
 147          {
 148                  langDesc,
 149                  mfrDesc,
 150                  prodDesc,
 151                  serDesc,
 152                  int0Desc,
 153          
 154          };
 155          
 156          //-----------------------------------------------------------------------------
 157          SI_SEGMENT_VARIABLE(initstruct,
 159                          const USBD_Init_TypeDef,
 159                          SI_SEG_CODE) =
 160          {
 161                  deviceDesc,                                         // deviceDescriptor
 162                  configDesc,// configDescriptor
 163                  myUsbStringTable_USEnglish,// stringDescriptors
 164                  sizeof(myUsbStringTable_USEnglish) / sizeof(void *)// numberOfStrings
 165          };
 166          
 167          #ifdef __cplusplus
              }
              #endif
 170          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   ----    ----
C51 COMPILER V9.53.0.0   DESCRIPTORS                                                       03/29/2016 00:06:39 PAGE 4   

   CONSTANT SIZE    =    186    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
